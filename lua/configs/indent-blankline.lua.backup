-- configs/indent-blankline.lua
local M = {}

function M.setup()
  local ibl = require "ibl"
  local hooks = require "ibl.hooks"

  -- Create highlight groups for different indent levels
  local highlight = {
    "IblIndent1",
    "IblIndent2",
    "IblIndent3",
    "IblIndent4",
    "IblIndent5",
    "IblIndent6",
  }

  -- Set up the hooks for multiple colors
  hooks.register(hooks.type.HIGHLIGHT_SETUP, function()
    -- Create muted versions of the colors for regular indent lines
    vim.api.nvim_set_hl(0, "IblIndent1", { fg = "#2b4255" }) -- Muted blue
    vim.api.nvim_set_hl(0, "IblIndent2", { fg = "#2b3b33" }) -- Muted green
    vim.api.nvim_set_hl(0, "IblIndent3", { fg = "#3b332b" }) -- Muted orange
    vim.api.nvim_set_hl(0, "IblIndent4", { fg = "#3b2b35" }) -- Muted pink
    vim.api.nvim_set_hl(0, "IblIndent5", { fg = "#352b3b" }) -- Muted purple
    vim.api.nvim_set_hl(0, "IblIndent6", { fg = "#3b382b" }) -- Muted yellow

    -- Set the scope highlight to be bright and bold
    vim.api.nvim_set_hl(0, "IblScope", { fg = "#58C6FF", bold = true })
  end)

  ibl.setup {
    indent = {
      highlight = highlight,
      char = "â”‚",
    },
    scope = {
      enabled = true,
      show_start = false,
      show_end = false,
      highlight = "IblScope",
      priority = 500,
      include = {
        node_type = {
          ["*"] = { "*" },
          css = { "block", "rule", "declaration" }, -- Explicitly include CSS node types
        },
      },
    },
  }
end

return M
